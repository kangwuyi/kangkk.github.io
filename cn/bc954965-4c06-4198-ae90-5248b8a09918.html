<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta property="wb:webmaster" content="7e72a191affb5721" />
    <meta name="description" content="技巧">
    <meta name="keywords" content="Ji,Qiao,Ji Qiao,技巧">
    <!-- <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache"> -->
    <title>技巧</title>
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../static/css/base.css">
    <link rel="stylesheet" href="../static/css/mark.css">
    <link rel="stylesheet" href="../static/font/iconfont.css">
    <!--[if lt IE 9]>
    <script src="../static/js/html5.js"></script>
    <![endif]-->
    <script type="application/javascript" src="../static/js/jquery.min.js"></script>
</head>

<body class="body__note">
    <header class="header">
        <div class="header__content w-900">
            <h1 class="content__title">
                <a class="title__link-a" href="https://github.com/kangkk" target="_blank">kangkk<span class="title__link-span--icon iconfont icon-github"></span></a>
            </h1>
            <small class="content__btn">
                <a class="content__btn-a" href="./note.html">BACK HOME</a>
            </small>
        </div>
    </header>


<div class="container w-900">
    <h1><span class="header-link" id="技巧">技巧</span></h1><p>下面的技巧，后三个，请谨慎用于团队项目中(主要考虑到可读性的问题)，不然，leader 干你没商量。</p>
<p>Boolean
这个技巧用的很多，也非常的简单</p>
<p>!!&#39;foo&#39;
通过两个取反，可以强制转换为Boolean类型。较为常用。</p>
<p>Number
这个也特别简单，String转化为Number</p>
<p>+&#39;45&#39;
+new Date
会自动转化为number类型的。较为常用。</p>
<p>IIFE
这个其实非常有实用价值，不算是装逼。只是其他语言里没有这么玩的，给不太了解js的同学看那可牛逼大了。</p>
<p>(function(arg) {
  // do something
})(arg)
实用价值在于可以防止全局污染。不过现在随着ES2015的普及已经没什么必要用这个了，我相信五年之后，这种写法就会逐渐没落。</p>
<p>自己干五年，在实习生面前装逼用也是蛮不错的嘛~</p>
<p>Closure
闭包嘛，js 特别好玩的一个地方。上面的立即执行函数就是对闭包的一种运用。</p>
<p>不了解的回去翻翻书，知乎上也有很多讨论，可以去看看。</p>
<p>闭包用起来对初学者来说简直就是大牛的标志(其实并不是)。</p>
<p>var counter = function() {
  var count = 0
  return function() {
  return count++
  }
}
上面用到了闭包，看起来还挺装逼的吧。不过好像没什么实用价值。</p>
<p>那么这样呢？</p>
<p>var isType = function(type) {
  return function(obj) {
  return toString.call(obj) == &#39;[Object &#39; + type + &#39;]&#39;;
  }
}
通过高阶函数很轻松的实现判定类别。(别忘了有判定Array的Array.isArray())</p>
<p>当然，很明显，这只是基础，并不能更装逼一点。来看下一节</p>
<p>Event
事件响应前端肯定都写烂了，一般来说如何写一个计数器呢？</p>
<p>var times = 0
var foo = document.querySelector(&#39;.foo&#39;)
foo.addEventListener(&#39;click&#39;, function() {
  times++
  console.log(times)
}, false)
好像是没什么问题哦，但是！变量times为什么放在外面，就用了一次放在外面，命名冲突了怎么办，或者万一在外面修改了怎么办。</p>
<p>这个时候这样一个事件监听代码就比较牛逼了</p>
<p>foo.addEventListener(&#39;click&#39;, (function() {
  var times = 0
  return function() {
  times++
  console.log(times)
  }
})(), false)
怎么样，是不是立刻感觉不一样了。瞬间逼格高了起来！</p>
<p>通过创建一个闭包，把times封装到里面，然后返回函数。这个用法不太常见。</p>
<p>parseInt
高能预警
从这里开始，下面的代码谨慎写到公司代码里！
parseInt这个函数太普通了，怎么能装逼。答案是~~</p>
<p>现在摁下F12，在console里复制粘贴这样的代码：</p>
<p>~~3.14159
// =&gt; 3
~~5.678
// =&gt; 5
这个技巧十分装逼，原理是~是一个叫做按位非的操作，会返回数值的反码。是二进制操作。</p>
<p>原因在于JavaScript中的number都是double类型的，在位操作的时候要转化成int，两次~就还是原数。</p>
<p>Hex
十六进制操作。其实就是一个Array.prototype.toString(16)的用法</p>
<p>看到这个词脑袋里冒出的肯定是CSS的颜色。</p>
<p>做到随机的话可以这样</p>
<p>(~~(Math.random()*((1&lt;&lt;24)-1))).toString(16)+&#39;00000&#39;).substring(0,7)
底下的原文链接非常建议去读一下，后三个技巧都是在那里学到的。</p>
<p>注：
此随机数会产生五位，四位，甚至一位的颜色。所以严谨的话还是要做一下判定的
谢谢@yangfch3和@scar的勘误
«
左移操作。这个操作特别叼。一般得玩 C 玩得多的，这个操作会懂一些。一般半路出家的前端码农可能不太了解(说的是我 ☹)。</p>
<p>这个也是二进制操作。将数值二进制左移</p>
<p>解释上面的1&lt;&lt;24的操作。</p>
<p>其实是1左移24位。000000000000000000000001左移24位，变成了1000000000000000000000000</p>
<p>不信？</p>
<p>试着在console粘贴下面的代码</p>
<p>parseInt(&#39;1000000000000000000000000&#39;, 2) === (1 &lt;&lt; 24)
其实还有一种更容易理解的方法来解释</p>
<p>Math.pow(2,24) === (1 &lt;&lt; 24)
二进制操作。</p>

</div>
<script>
$(function(){
  /**$('pre code').each(function(){
        var lines = $(this).text().split('\n').length - 1;
        var $numbering = $('<ul/>').addClass('pre-numbering');
        $(this)
            .addClass('has-numbering')
            .parent()
            .append($numbering);
        for(i=1;i<=lines;i++){
            $numbering.append($('<li/>').text(i));
        }
    });**/
    $('img').each(function(){
          var _self = $(this);
          var altCache = _self.attr('alt');
          if(altCache === 'svg'){
            var hrefCache = _self.attr('src');
            var dataCache = hrefCache.substr(0,(hrefCache.length-3))+'svg';
            _self.replaceWith('<p class="svgNodePhoto"><object data="'+dataCache+'" type="image/svg+xml"></object></p>')
          }
      });
});
</script>
<footer class="footer w-900">
    <a class="footer__backToTop-btn" href="#" id="back-to-top">
        <i class="footer__backToTop-btn--icon iconfont icon-chevronup"></i>
    </a>
    <a class="footer__github-btn" href="https://github.com/kangkk" target="_blank">Kangkk on GitHub</a>
    <div class="ds-thread" data-thread-key="bc954965-4c06-4198-ae90-5248b8a09918" data-title="技巧" data-url="http://kangkk.com/cn/bc954965-4c06-4198-ae90-5248b8a09918.html"></div>
    <script type="text/javascript">
        var duoshuoQuery = {
            short_name: "kangkk"
        };
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';
            ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] ||
                document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
    <section class="content__section">
        <p class="content__a-btn">
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">
                <img alt="Creative Commons License" style="border-width:0" src="../static/bgimg/licensebuttons.png" />
            </a>
        </p>
        <p class="content__p--word">This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"> Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License
        </a>. Reprint the 《<sub>技巧</sub>》 need signature "<sub>kangkk</sub>", and the url is <sub>http://kangkk.com/cn/bc954965-4c06-4198-ae90-5248b8a09918.html</sub>.
        </p>
        <p class="content__text-p--desc">
            <em>这里的大多数文章都写于很多年以前，十年历程，多于怀旧（@2006-2016）</em>
            <br>Copyright (C) 2016 Kangkk.com, All Rights Reserved
            <br>Made in China.
            <span class="text__span--link">
            ✎
            <a href="../index.html">Home</a> –
            <a href="./mood.html">Mood</a> –
            <a href="./source.html">Source</a> –
            <a href="./note.html">Note</a>.
          </span>
        </p>
    </section>
</footer>
<script type="text/javascript">
    ! function($) {
        $(window).scroll(function() {
            $(this).scrollTop() > 100 ? $("#back-to-top").fadeIn() : $("#back-to-top").fadeOut()
        }), $("#back-to-top").on("click", function(b) {
            return b.preventDefault(), $("html, body").animate({
                scrollTop: 0
            }, 100), !1
        });
    }(jQuery);
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?95e6652d7f50f8def7540e687f338f60";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
<script type="text/javascript">
    (function() {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>
</body>

</html>

